pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
#include utils.lua
#include animation.lua

game_state_title   = 'title'
game_state_playing = 'playing'
game_state_won     = 'won'

-- Default state so title screen works
g_anims = {}
frame_count = 0

function _init()
   player = make_obj({
         x = 12,
         y = 23,
         frames = 22,
         sprite = 0,
         speed_x = 0,
         move_dir = 0,
   })
end

function _update60()
   if btn(b_right) then
      player.move_dir = 1
      local sx = player.move_dir * 0.01
      if sx < 3 then
         player.speed_x += sx
      end
   end
   if btn(b_left) then
      player.move_dir = -1
      local sx = player.move_dir * 0.01
      if sx < 3 then
         player.speed_x += sx
      end
   end
   player.speed_x *= 0.991
   player.x += player.speed_x
end

function _draw()
   cls(black)
   rectfill(0, 0,  127, 31, pink)
   rectfill(0, 32, 127, 127, orange)
   spr(player.sprite, player.x, player.y)
   rectfill(0, 0, 127, 10)
   print(dumper(player.speed_x, ' @ ', player.x), 1, 1, slate)
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aacaca0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aacaca0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a9aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aa99aa0009009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaaa00099999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000996666990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
