pico-8 cartridge // http://www.pico-8.com
version 30
__lua__

delays = {}
function delay(f, n)
   local started = t()
   local co
   co = cocreate(function()
         while (t() - started) < n do
            yield()
         end
      
         f()
         for idx, v in pairs(delays) do
            if v == co then
               deli(delays, idx)
               break
            end
         end
   end)
   add(delays, co)
end

function run_delays()
   for co in all(delays) do
      coresume(co)
   end
end

function _update()
  run_delays()
end

function _init()
   cls()
   print('testing testing 1 2 3', 0, 0, 7)
   delay(
      function()
         print('success!', 0, 20, 11)
      end,
      2
   )
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
